{
  "version": 3,
  "sources": ["../src/core/worker.ts", "../src/core/WaynWidget.ts", "../src/core/index.ts"],
  "sourcesContent": ["import { WaynChallenge } from '../types';\n\n/**\n * Creates a Web Worker for solving PoW challenges\n */\nexport function createWorker(): Worker {\n  const workerScript = `\n    // PoW Worker for Wayn CAPTCHA\n    let wasmModule = null;\n    \n    async function loadWasm(wasmUrl) {\n      if (wasmModule) return wasmModule;\n      \n      try {\n        // Import the WASM module\n        const wasmImport = await import(wasmUrl);\n        await wasmImport.default();\n        wasmModule = wasmImport;\n        return wasmModule;\n      } catch (error) {\n        console.error('Failed to load WASM:', error);\n        throw error;\n      }\n    }\n    \n    async function solveChallenge(salt, target) {\n      let nonce = 0;\n      const maxIterations = 1000000; // Prevent infinite loops\n      \n      // Simple PoW implementation (you'll need to replace this with your actual WASM implementation)\n      while (nonce < maxIterations) {\n        const input = salt + nonce.toString();\n        const hash = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(input));\n        const hashArray = new Uint8Array(hash);\n        \n        // Check if hash meets target difficulty\n        let leadingZeros = 0;\n        for (let i = 0; i < hashArray.length; i++) {\n          if (hashArray[i] === 0) {\n            leadingZeros += 8;\n          } else {\n            leadingZeros += Math.clz32(hashArray[i]) - 24;\n            break;\n          }\n        }\n        \n        if (leadingZeros >= target) {\n          return nonce;\n        }\n        \n        nonce++;\n      }\n      \n      throw new Error('Failed to solve challenge within iteration limit');\n    }\n    \n    self.onmessage = async function(e) {\n      const { salt, target, wasmUrl } = e.data;\n      \n      try {\n        if (wasmUrl) {\n          await loadWasm(wasmUrl);\n        }\n        \n        const nonce = await solveChallenge(salt, target);\n        \n        self.postMessage({\n          found: true,\n          nonce: nonce\n        });\n      } catch (error) {\n        self.postMessage({\n          found: false,\n          error: error.message\n        });\n      }\n    };\n  `;\n\n  const blob = new Blob([workerScript], { type: 'application/javascript' });\n  return new Worker(URL.createObjectURL(blob));\n}\n\n/**\n * Solves PoW challenges using Web Workers\n */\nexport async function solveChallenges(\n  challenges: WaynChallenge[],\n  workerCount: number = navigator.hardwareConcurrency || 4,\n  onProgress?: (progress: number) => void,\n  wasmUrl?: string\n): Promise<Array<[string, number, number]>> {\n  const workers: Worker[] = [];\n  const results: Array<[string, number, number]> = [];\n  let completed = 0;\n  const total = challenges.length;\n\n  // Create workers\n  for (let i = 0; i < Math.min(workerCount, challenges.length); i++) {\n    workers.push(createWorker());\n  }\n\n  const solveSingleChallenge = (challenge: WaynChallenge, workerId: number): Promise<[string, number, number]> => {\n    return new Promise((resolve, reject) => {\n      const worker = workers[workerId];\n      \n      const timeout = setTimeout(() => {\n        worker.terminate();\n        workers[workerId] = createWorker();\n        reject(new Error('Worker timeout'));\n      }, 30000);\n\n      worker.onmessage = (event) => {\n        const { found, nonce, error } = event.data;\n        \n        clearTimeout(timeout);\n        \n        if (found) {\n          completed++;\n          const progress = Math.round((completed / total) * 100);\n          onProgress?.(progress);\n          resolve([challenge.salt, challenge.target, nonce]);\n        } else {\n          reject(new Error(error || 'Failed to solve challenge'));\n        }\n      };\n\n      worker.onerror = (error) => {\n        clearTimeout(timeout);\n        reject(new Error(`Worker error: ${error.message}`));\n      };\n\n      worker.postMessage({\n        salt: challenge.salt,\n        target: challenge.target,\n        wasmUrl\n      });\n    });\n  };\n\n  try {\n    // Process challenges in batches\n    for (let i = 0; i < challenges.length; i += workers.length) {\n      const batch = challenges.slice(i, i + workers.length);\n      const batchResults = await Promise.all(\n        batch.map((challenge, index) => solveSingleChallenge(challenge, index))\n      );\n      results.push(...batchResults);\n    }\n\n    return results;\n  } finally {\n    // Clean up workers\n    workers.forEach(worker => {\n      try {\n        worker.terminate();\n      } catch (error) {\n        console.error('Error terminating worker:', error);\n      }\n    });\n  }\n}\n", "import { ChallengeResponse, SolutionResponse, WaynChallenge } from '../types';\nimport { solveChallenges } from './worker';\n\ninterface WidgetState {\n  state: 'idle' | 'verifying' | 'verified' | 'error';\n  progress: number;\n  token: string | null;\n  error: string | null;\n}\n\ninterface WidgetI18n {\n  initialState: string;\n  verifying: string;\n  verified: string;\n  error: string;\n}\n\nexport class WaynWidget extends HTMLElement {\n  private shadow: ShadowRoot;\n  private container!: HTMLElement;\n  private resetTimer: number | null = null;\n  private isProcessing = false;\n  private state: WidgetState = {\n    state: 'idle',\n    progress: 0,\n    token: null,\n    error: null\n  };\n\n  // Default i18n texts\n  private i18n: WidgetI18n = {\n    initialState: \"I'm a human\",\n    verifying: 'Verifying...',\n    verified: \"You're a human\",\n    error: 'Error. Try again.'\n  };\n\n  constructor() {\n    super();\n    this.shadow = this.attachShadow({ mode: 'open' });\n    this.setupWidget();\n  }\n\n  static get observedAttributes() {\n    return [\n      'api',\n      'color',\n      'worker-count',\n      'disabled',\n      'data-i18n-initial-state',\n      'data-i18n-verifying',\n      'data-i18n-verified',\n      'data-i18n-error'\n    ];\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return;\n\n    switch (name) {\n      case 'data-i18n-initial-state':\n        this.i18n.initialState = newValue || this.i18n.initialState;\n        break;\n      case 'data-i18n-verifying':\n        this.i18n.verifying = newValue || this.i18n.verifying;\n        break;\n      case 'data-i18n-verified':\n        this.i18n.verified = newValue || this.i18n.verified;\n        break;\n      case 'data-i18n-error':\n        this.i18n.error = newValue || this.i18n.error;\n        break;\n    }\n\n    this.updateUI();\n  }\n\n  connectedCallback() {\n    this.updateUI();\n    this.addEventListeners();\n  }\n\n  disconnectedCallback() {\n    this.cleanup();\n  }\n\n  private setupWidget() {\n    this.container = document.createElement('div');\n    this.container.className = 'wayn-widget';\n    \n    this.container.innerHTML = `\n      <div class=\"wayn-widget__content\">\n        <div class=\"wayn-widget__checkbox\"></div>\n        <span class=\"wayn-widget__text\">${this.i18n.initialState}</span>\n      </div>\n      \n      <a href=\"https://github.com/islemci/wayn\" \n         class=\"wayn-widget__credits\" \n         target=\"_blank\" \n         rel=\"noopener noreferrer\"\n         aria-label=\"Secured by Wayn\">\n        <span class=\"wayn-widget__credits-text\">Secured by&nbsp;</span>\n        Wayn\n      </a>\n      \n      <input type=\"hidden\" name=\"wayn-token\" value=\"\">\n    `;\n\n    this.injectStyles();\n    this.shadow.appendChild(this.container);\n  }\n\n  private injectStyles() {\n    const style = document.createElement('style');\n    style.textContent = `\n      /* Wayn Widget Styles */\n      .wayn-widget {\n        --wayn-background: #fdfdfd;\n        --wayn-border-color: #dddddd8f;\n        --wayn-border-radius: 14px;\n        --wayn-color: #212121;\n        --wayn-checkbox-size: 25px;\n        --wayn-checkbox-border: 1px solid #aaaaaad1;\n        --wayn-checkbox-border-radius: 6px;\n        --wayn-checkbox-background: #fafafa91;\n        --wayn-gap: 15px;\n        --wayn-widget-height: 30px;\n        --wayn-widget-width: 230px;\n        --wayn-widget-padding: 14px;\n        --wayn-spinner-color: #000;\n        --wayn-spinner-background-color: #eee;\n        --wayn-spinner-thickness: 5px;\n        --wayn-font: system, -apple-system, \"BlinkMacSystemFont\", \".SFNSText-Regular\", \"San Francisco\", \"Roboto\", \"Segoe UI\", \"Helvetica Neue\", \"Lucida Grande\", \"Ubuntu\", \"arial\", sans-serif;\n        \n        box-sizing: border-box;\n        background-color: var(--wayn-background);\n        border: 1px solid var(--wayn-border-color);\n        border-radius: var(--wayn-border-radius);\n        user-select: none;\n        height: var(--wayn-widget-height);\n        width: var(--wayn-widget-width);\n        display: flex;\n        align-items: center;\n        padding: var(--wayn-widget-padding);\n        gap: var(--wayn-gap);\n        cursor: pointer;\n        transition: filter 0.2s, transform 0.2s;\n        position: relative;\n        -webkit-tap-highlight-color: rgba(255, 255, 255, 0);\n        overflow: hidden;\n        color: var(--wayn-color);\n        font-family: var(--wayn-font);\n      }\n\n      .wayn-widget:hover {\n        filter: brightness(98%);\n      }\n\n      .wayn-widget:focus {\n        outline: 2px solid #0066cc;\n        outline-offset: 2px;\n      }\n\n      .wayn-widget--dark {\n        --wayn-background: #2d2d2d;\n        --wayn-border-color: #4a4a4a;\n        --wayn-color: #ffffff;\n        --wayn-checkbox-background: #404040;\n        --wayn-checkbox-border: 1px solid #666666;\n        --wayn-spinner-color: #ffffff;\n        --wayn-spinner-background-color: #555555;\n      }\n\n      .wayn-widget__content {\n        display: flex;\n        align-items: center;\n        gap: var(--wayn-gap);\n        flex: 1;\n      }\n\n      .wayn-widget__checkbox {\n        width: var(--wayn-checkbox-size);\n        height: var(--wayn-checkbox-size);\n        border: var(--wayn-checkbox-border);\n        border-radius: var(--wayn-checkbox-border-radius);\n        background-color: var(--wayn-checkbox-background);\n        transition: opacity 0.2s;\n        margin-top: 2px;\n        margin-bottom: 2px;\n        flex-shrink: 0;\n      }\n\n      .wayn-widget__text {\n        margin: 0;\n        font-weight: 500;\n        font-size: 15px;\n        user-select: none;\n        transition: opacity 0.2s;\n        font-family: var(--wayn-font);\n      }\n\n      .wayn-widget--verifying .wayn-widget__checkbox {\n        background: none;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transform: scale(1.1);\n        border: none;\n        border-radius: 50%;\n        background: conic-gradient(\n          var(--wayn-spinner-color) 0%, \n          var(--wayn-spinner-color) var(--progress, 0%), \n          var(--wayn-spinner-background-color) var(--progress, 0%), \n          var(--wayn-spinner-background-color) 100%\n        );\n        position: relative;\n      }\n\n      .wayn-widget--verifying .wayn-widget__checkbox::after {\n        content: \"\";\n        background-color: var(--wayn-background);\n        width: calc(100% - var(--wayn-spinner-thickness));\n        height: calc(100% - var(--wayn-spinner-thickness));\n        border-radius: 50%;\n        margin: calc(var(--wayn-spinner-thickness) / 2);\n      }\n\n      .wayn-widget--verified .wayn-widget__checkbox {\n        border: 1px solid transparent;\n        background-image: url(\"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cstyle%3E%40keyframes%20anim%7B0%25%7Bstroke-dashoffset%3A23.21320343017578px%7Dto%7Bstroke-dashoffset%3A0%7D%7D%3C%2Fstyle%3E%3Cpath%20fill%3D%22none%22%20stroke%3D%22%2300a67d%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%222%22%20d%3D%22m5%2012%205%205L20%207%22%20style%3D%22stroke-dashoffset%3A0%3Bstroke-dasharray%3A23.21320343017578px%3Banimation%3Aanim%20.5s%20ease%22%2F%3E%3C%2Fsvg%3E\");\n        background-size: cover;\n      }\n\n      .wayn-widget--verified {\n        cursor: default;\n      }\n\n      .wayn-widget--error .wayn-widget__checkbox {\n        border: 1px solid transparent;\n        background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='96' height='96' viewBox='0 0 24 24'%3E%3Cpath fill='%23f55b50' d='M11 15h2v2h-2zm0-8h2v6h-2zm1-5C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 18a8 8 0 0 1-8-8a8 8 0 0 1 8-8a8 8 0 0 1 8 8a8 8 0 0 1-8 8'/%3E%3C/svg%3E\");\n        background-size: cover;\n      }\n\n      .wayn-widget--error {\n        cursor: pointer;\n      }\n\n      .wayn-widget__credits {\n        position: absolute;\n        bottom: 10px;\n        right: 10px;\n        font-size: 12px;\n        color: var(--wayn-color);\n        opacity: 0.8;\n        text-decoration: none;\n        font-family: var(--wayn-font);\n      }\n\n      .wayn-widget__credits:hover {\n        opacity: 1;\n      }\n\n      .wayn-widget__credits-text {\n        display: none;\n        text-decoration: underline;\n      }\n\n      .wayn-widget__credits:hover .wayn-widget__credits-text {\n        display: inline-block;\n      }\n\n      .wayn-widget[aria-disabled=\"true\"] {\n        cursor: not-allowed;\n        opacity: 0.6;\n      }\n\n      .wayn-widget--verifying {\n        cursor: progress;\n      }\n\n      @media (max-width: 480px) {\n        .wayn-widget {\n          --wayn-widget-width: 200px;\n          --wayn-widget-padding: 12px;\n        }\n        \n        .wayn-widget__text {\n          font-size: 14px;\n        }\n      }\n\n      @media (prefers-contrast: high) {\n        .wayn-widget {\n          --wayn-border-color: #000000;\n          --wayn-checkbox-border: 2px solid #000000;\n        }\n        \n        .wayn-widget--dark {\n          --wayn-border-color: #ffffff;\n          --wayn-checkbox-border: 2px solid #ffffff;\n        }\n      }\n\n      @media (prefers-reduced-motion: reduce) {\n        .wayn-widget,\n        .wayn-widget__checkbox,\n        .wayn-widget__text {\n          transition: none;\n        }\n      }\n    `;\n    this.shadow.appendChild(style);\n  }\n\n  private addEventListeners() {\n    this.container.addEventListener('click', this.handleClick.bind(this));\n    this.container.addEventListener('keydown', this.handleKeyDown.bind(this));\n    \n    // Prevent credits link from triggering widget\n    const creditsLink = this.container.querySelector('.wayn-widget__credits') as HTMLElement;\n    creditsLink.addEventListener('click', (e) => {\n      e.stopPropagation();\n    });\n  }\n\n  private handleClick() {\n    if (this.canInteract()) {\n      this.solve();\n    }\n  }\n\n  private handleKeyDown(event: KeyboardEvent) {\n    if ((event.key === 'Enter' || event.key === ' ') && this.canInteract()) {\n      event.preventDefault();\n      this.solve();\n    }\n  }\n\n  private canInteract(): boolean {\n    return !this.isProcessing && \n           !this.hasAttribute('disabled') && \n           (this.state.state === 'idle' || this.state.state === 'error');\n  }\n\n  private async solve() {\n    if (this.isProcessing) return;\n\n    const api = this.getAttribute('api');\n    if (!api) {\n      this.handleError('API endpoint is required');\n      return;\n    }\n\n    this.isProcessing = true;\n    \n    try {\n      this.setState({\n        state: 'verifying',\n        progress: 0,\n        token: null,\n        error: null\n      });\n\n      // Request challenge\n      const challengeResponse = await fetch(`${api}/challenge`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      if (!challengeResponse.ok) {\n        throw new Error(`Failed to get challenge: ${challengeResponse.statusText}`);\n      }\n\n      const challengeData: ChallengeResponse = await challengeResponse.json();\n\n      // Solve challenges\n      const workerCount = parseInt(this.getAttribute('worker-count') || '') || navigator.hardwareConcurrency || 4;\n      const solutions = await solveChallenges(\n        challengeData.challenge,\n        workerCount,\n        this.handleProgress.bind(this)\n      );\n\n      // Submit solutions\n      const solutionResponse = await fetch(`${api}/verify`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          token: challengeData.token,\n          solutions\n        })\n      });\n\n      if (!solutionResponse.ok) {\n        throw new Error(`Failed to verify solution: ${solutionResponse.statusText}`);\n      }\n\n      const solutionData: SolutionResponse = await solutionResponse.json();\n\n      if (!solutionData.success) {\n        throw new Error('Solution verification failed');\n      }\n\n      // Success\n      this.setState({\n        state: 'verified',\n        progress: 100,\n        token: solutionData.token,\n        error: null\n      });\n\n      this.dispatchEvent(new CustomEvent('wayn:solve', {\n        detail: { token: solutionData.token },\n        bubbles: true\n      }));\n\n      // Set up auto-reset based on expiration\n      if (solutionData.expires) {\n        const expiresIn = new Date(solutionData.expires).getTime() - Date.now();\n        if (expiresIn > 0 && expiresIn < 24 * 60 * 60 * 1000) {\n          this.resetTimer = window.setTimeout(() => this.reset(), expiresIn);\n        }\n      }\n\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error occurred';\n      this.handleError(errorMessage);\n    } finally {\n      this.isProcessing = false;\n    }\n  }\n\n  private handleProgress(progress: number) {\n    this.setState({\n      ...this.state,\n      progress\n    });\n\n    this.dispatchEvent(new CustomEvent('wayn:progress', {\n      detail: { progress },\n      bubbles: true\n    }));\n  }\n\n  private handleError(error: string) {\n    this.setState({\n      state: 'error',\n      progress: 0,\n      token: null,\n      error\n    });\n\n    this.dispatchEvent(new CustomEvent('wayn:error', {\n      detail: { error },\n      bubbles: true\n    }));\n  }\n\n  private setState(newState: Partial<WidgetState>) {\n    this.state = { ...this.state, ...newState };\n    this.updateUI();\n  }\n\n  private updateUI() {\n    const color = this.getAttribute('color') || 'light';\n    const disabled = this.hasAttribute('disabled');\n    \n    this.container.className = `wayn-widget wayn-widget--${color} wayn-widget--${this.state.state}`;\n    \n    if (disabled) {\n      this.container.setAttribute('aria-disabled', 'true');\n    } else {\n      this.container.removeAttribute('aria-disabled');\n    }\n\n    // Update text\n    const textElement = this.container.querySelector('.wayn-widget__text') as HTMLElement;\n    if (textElement) {\n      switch (this.state.state) {\n        case 'verifying':\n          textElement.textContent = `${this.i18n.verifying} ${this.state.progress}%`;\n          break;\n        case 'verified':\n          textElement.textContent = this.i18n.verified;\n          break;\n        case 'error':\n          textElement.textContent = this.i18n.error;\n          break;\n        default:\n          textElement.textContent = this.i18n.initialState;\n      }\n    }\n\n    // Update progress\n    if (this.state.state === 'verifying') {\n      const checkboxElement = this.container.querySelector('.wayn-widget__checkbox') as HTMLElement;\n      if (checkboxElement) {\n        checkboxElement.style.setProperty('--progress', `${this.state.progress}%`);\n      }\n    }\n\n    // Update hidden input\n    const hiddenInput = this.container.querySelector('input[name=\"wayn-token\"]') as HTMLInputElement;\n    if (hiddenInput) {\n      hiddenInput.value = this.state.token || '';\n    }\n\n    // Update aria-label\n    this.container.setAttribute('aria-label', this.getAriaLabel());\n    this.container.setAttribute('role', 'button');\n    this.container.setAttribute('tabindex', disabled ? '-1' : '0');\n  }\n\n  private getAriaLabel(): string {\n    switch (this.state.state) {\n      case 'verifying':\n        return `Verifying you're a human, ${this.state.progress}% complete`;\n      case 'verified':\n        return \"We have verified you're a human, you may now continue\";\n      case 'error':\n        return 'An error occurred, click to try again';\n      default:\n        return \"Click to verify you're a human\";\n    }\n  }\n\n  private reset() {\n    if (this.resetTimer) {\n      window.clearTimeout(this.resetTimer);\n      this.resetTimer = null;\n    }\n\n    this.setState({\n      state: 'idle',\n      progress: 0,\n      token: null,\n      error: null\n    });\n\n    this.dispatchEvent(new CustomEvent('wayn:reset', {\n      bubbles: true\n    }));\n  }\n\n  private cleanup() {\n    if (this.resetTimer) {\n      window.clearTimeout(this.resetTimer);\n      this.resetTimer = null;\n    }\n  }\n\n  // Public API\n  public get token(): string | null {\n    return this.state.token;\n  }\n\n  public get isVerified(): boolean {\n    return this.state.state === 'verified';\n  }\n\n  public resetWidget(): void {\n    this.reset();\n  }\n}\n", "import { WaynWidget } from './WaynWidget';\n\n// Register the custom element\nif (!customElements.get('wayn-widget')) {\n  customElements.define('wayn-widget', WaynWidget);\n}\n\n// Export for module usage\nexport { WaynWidget };\nexport type { WaynChallenge, ChallengeResponse, SolutionResponse } from '../types';\n\n// Global class for programmatic usage\nexport class Wayn {\n  private widget: WaynWidget;\n\n  constructor(config: {\n    api: string;\n    color?: 'light' | 'dark';\n    workerCount?: number;\n    container?: HTMLElement;\n    i18n?: {\n      initialState?: string;\n      verifying?: string;\n      verified?: string;\n      error?: string;\n    };\n  }) {\n    this.widget = document.createElement('wayn-widget') as WaynWidget;\n    \n    // Set attributes\n    this.widget.setAttribute('api', config.api);\n    if (config.color) {\n      this.widget.setAttribute('color', config.color);\n    }\n    if (config.workerCount) {\n      this.widget.setAttribute('worker-count', config.workerCount.toString());\n    }\n    if (config.i18n) {\n      if (config.i18n.initialState) {\n        this.widget.setAttribute('data-i18n-initial-state', config.i18n.initialState);\n      }\n      if (config.i18n.verifying) {\n        this.widget.setAttribute('data-i18n-verifying', config.i18n.verifying);\n      }\n      if (config.i18n.verified) {\n        this.widget.setAttribute('data-i18n-verified', config.i18n.verified);\n      }\n      if (config.i18n.error) {\n        this.widget.setAttribute('data-i18n-error', config.i18n.error);\n      }\n    }\n\n    // Append to container or hide it for programmatic usage\n    if (config.container) {\n      config.container.appendChild(this.widget);\n    } else {\n      this.widget.style.display = 'none';\n      document.body.appendChild(this.widget);\n    }\n  }\n\n  // Event listeners\n  public onSolve(callback: (token: string) => void): void {\n    this.widget.addEventListener('wayn:solve', (event: Event) => {\n      const customEvent = event as CustomEvent;\n      callback(customEvent.detail.token);\n    });\n  }\n\n  public onProgress(callback: (progress: number) => void): void {\n    this.widget.addEventListener('wayn:progress', (event: Event) => {\n      const customEvent = event as CustomEvent;\n      callback(customEvent.detail.progress);\n    });\n  }\n\n  public onError(callback: (error: string) => void): void {\n    this.widget.addEventListener('wayn:error', (event: Event) => {\n      const customEvent = event as CustomEvent;\n      callback(customEvent.detail.error);\n    });\n  }\n\n  public onReset(callback: () => void): void {\n    this.widget.addEventListener('wayn:reset', callback);\n  }\n\n  // Public methods\n  public get token(): string | null {\n    return this.widget.token;\n  }\n\n  public get isVerified(): boolean {\n    return this.widget.isVerified;\n  }\n\n  public reset(): void {\n    this.widget.resetWidget();\n  }\n\n  public destroy(): void {\n    if (this.widget.parentNode) {\n      this.widget.parentNode.removeChild(this.widget);\n    }\n  }\n}\n\n// Make it available globally for CDN usage\ndeclare global {\n  interface Window {\n    Wayn: typeof Wayn;\n    WaynWidget: typeof WaynWidget;\n  }\n}\n\nif (typeof window !== 'undefined') {\n  window.Wayn = Wayn;\n  window.WaynWidget = WaynWidget;\n}\n"],
  "mappings": "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",
  "names": []
}
